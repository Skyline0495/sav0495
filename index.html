<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–†–∞—É–Ω–¥–æ–≤—ã–π —Ç–∞–π–º–µ—Ä</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background: #f5f5f5;
      padding: 40px;
    }
    input {
      padding: 10px;
      margin: 5px;
      font-size: 18px;
    }
    button {
      padding: 10px 20px;
      font-size: 18px;
      cursor: pointer;
      margin-top: 10px;
    }
    .timer {
      font-size: 48px;
      margin-top: 30px;
    }
    .round {
      font-size: 32px;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <h1>–†–∞—É–Ω–¥–æ–≤—ã–π —Ç–∞–π–º–µ—Ä</h1>
  <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤: <input type="number" id="rounds" value="5"></label><br>
  <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞—É–Ω–¥–∞ (–º–∏–Ω:—Å–µ–∫): <input type="text" id="duration" value="5:00"></label><br>
  <button onclick="startTimer()">–°—Ç–∞—Ä—Ç</button>

  <div class="timer" id="timePassed">‚åõ 00:00</div>
  <div class="round" id="roundStatus">üéØ –†–∞—É–Ω–¥: -</div>
  <div class="round" id="timeToNext">‚è≥ –î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ: -</div>

  <script>
    let startTime;
    let interval;
    let totalRounds = 5;
    let roundDuration = 300; // –≤ —Å–µ–∫—É–Ω–¥–∞—Ö

    function startTimer() {
      const roundsInput = document.getElementById('rounds').value;
      const durationInput = document.getElementById('duration').value;

      totalRounds = parseInt(roundsInput);
      const [min, sec] = durationInput.split(':').map(Number);
      roundDuration = min * 60 + sec;

      startTime = new Date();
      clearInterval(interval);
      interval = setInterval(updateTimer, 500);
    }

    function updateTimer() {
      const now = new Date();
      const secondsPassed = Math.floor((now - startTime) / 1000);
      const currentRound = Math.min(Math.floor(secondsPassed / roundDuration) + 1, totalRounds);
      const timeInCurrentRound = secondsPassed % roundDuration;
      const timeLeft = roundDuration - timeInCurrentRound;

      const minPassed = Math.floor(secondsPassed / 60).toString().padStart(2, '0');
      const secPassed = (secondsPassed % 60).toString().padStart(2, '0');
      document.getElementById('timePassed').textContent = `‚åõ ${minPassed}:${secPassed}`;
      document.getElementById('roundStatus').textContent = currentRound > totalRounds
        ? `‚úÖ –í—Å–µ —Ä–∞—É–Ω–¥—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã`
        : `üéØ –†–∞—É–Ω–¥ ${currentRound} –∏–∑ ${totalRounds}`;

      if (currentRound <= totalRounds) {
        const minLeft = Math.floor(timeLeft / 60).toString().padStart(2, '0');
        const secLeft = (timeLeft % 60).toString().padStart(2, '0');
        document.getElementById('timeToNext').textContent = `‚è≥ –î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ: ${minLeft}:${secLeft}`;
      } else {
        document.getElementById('timeToNext').textContent = `‚è≥ –î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ: -`;
      }
    }
  </script>
</body>
</html>